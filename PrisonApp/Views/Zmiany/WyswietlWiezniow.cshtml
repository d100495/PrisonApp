@model IEnumerable<PrisonApp.Models.ViewModels.WyswietlWiezniowViewModel>

@{
    ViewBag.Title = "WyswietlWiezniow";
}


<html>

<head>
    <meta name="viewport" content="width=device-width"/>
    <title>Lista więźniów</title>
</head>

<body>


<h2>Lista więźniów</h2>
<div class="row">
    <div class="col-md-8">
        <h4>Lista zakwaterowanych więźniów.</h4>

    </div>
</div>

<hr/>

@*@using (Html.BeginForm("WyswietlWiezniow", "Zmiany", FormMethod.Get)) do jednoczesnego filtrowania search i sort*@
@using (Html.BeginForm())
{
    <div class="row">
        <div class="col-lg-6">
            <div class="input-group">
                <span class="input-group-btn">
                    <input type="submit" value="Szukaj" class="btn btn-secondary"/>
                </span>
                @Html.TextBox("SearchString", null, new {@class = "form-control", placeholder = "Imie, nazwisko lub numer pesel"})
            </div>
        </div>
    </div>

    <br/>
}
@if (ViewBag.alert != null)
{
    <div class="alert alert-danger">@ViewBag.alert</div>
}
<table class="table">
    <tr>
        <th>
            @Html.ActionLink("Id więźnia", "WyswietlWiezniow", new {sortOrder = ViewBag.IDSortParm}, new {style = "color:black;"})
            @if (ViewBag.IDSortParm == "id_desc")
            {
                <span>▼</span>
            }
            else
            {
                <span>▲</span>
            }
        </th>

        <th>
            @Html.ActionLink("Imie więźnia", "WyswietlWiezniow", new {sortOrder = ViewBag.ImieSortParm}, new {style = "color:black;"})
            @if (ViewBag.ImieSortParm == "imie_desc")
            {
                <span>▼</span>
            }
            else
            {
                <span>▲</span>
            }
        </th>

        <th>
            @Html.ActionLink("Nazwisko więźnia", "WyswietlWiezniow", new {sortOrder = ViewBag.NazwiskoSortParm}, new {style = "color:black;"})
            @if (ViewBag.NazwiskoSortParm == "nazwisko_desc")
            {
                <span>▼</span>
            }
            else
            {
                <span>▲</span>
            }
        </th>

        <th>
            @Html.ActionLink("Pesel", "WyswietlWiezniow", new {sortOrder = ViewBag.PeselSortParm}, new {style = "color:black;"})
            @if (ViewBag.PeselSortParm == "pesel_desc")
            {
                <span>▼</span>
            }
            else
            {
                <span>▲</span>
            }
        </th>

        <th>
            @Html.ActionLink("Płeć", "WyswietlWiezniow", new {sortOrder = ViewBag.PlecSortParm}, new {style = "color:black;"})
            @if (ViewBag.PlecSortParm == "plec_desc")
            {
                <span>▼</span>
            }
            else
            {
                <span>▲</span>
            }
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Przydzial.FK_idCeli)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Wyrok.KategoriePrzestepstwa.NazwaKategorii)
        </th>
            <th>
                @Html.DisplayNameFor(model => model.Wyrok.DataRozpoczecia)
            </th>
        <th>
            @Html.DisplayNameFor(model=>model.Date)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Wiezien.idWieznia)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Wiezien.ImieWieznia)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Wiezien.NazwiskoWieznia)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Wiezien.Pesel)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Wiezien.Plec)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Przydzial.FK_idCeli)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Wyrok.KategoriePrzestepstwa.NazwaKategorii)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Wyrok.DataRozpoczecia)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Date)
            </td>
            <td>
                @Html.ActionLink("Przenieś", "PrzeniesWieznia", new {id = item.Wiezien.idWieznia}, new {@class = "btn-sm btn-primary"})
                @Html.ActionLink("Edytuj", "EdytujWieznia", new {id = item.Wiezien.idWieznia}, new {@class = "btn-sm btn-primary"})
                @Html.ActionLink("Zmień wyrok", "EdytujWyrok", new {id = item.Wiezien.idWieznia}, new {@class = "btn-sm btn-primary"})
                @Html.ActionLink("Zwolnij", "ZwolnijWieznia", "Wiezniowie", new {id = item.Wiezien.idWieznia}, new {@class = "btn-sm btn-primary"})
            </td>
        </tr>
    }


</table>


</body>
</html>